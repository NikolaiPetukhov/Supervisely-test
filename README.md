# Supervisely test task

## 1 Task
### Description
Написать два скрипта split и merge. Скрипт split принимает на вход картинку,
размер (h, w) окна в пикселях или процентах, смещение по x и y, и нарезает
изображения sliding window подходом. Результат сохраняется в директорию - все
настройки должны зашиваться в названия результирующих картинок. Скрипт
merge принимает на вход папку с нарезанными картинками и из них собирает
оригинальную. В конце обязательно нужно проверифицировать что пиксели
результата один в один совпадают с исходным изображением.

### Solution
PD-1 Пакет image_slicer имеет 3 функции: 
1. Split - Нарезает исходное изображение методом sliding window. 
Принимает на вход 5 обязательных аргументов: Путь к файлу, высота окна, ширина окна, смещение по оси X, смещение по оси Y.
И один опциональный аргумент - путь к папке, куда будут сохранены нарезанные куски. Если не указан, изображения сохраняться в папку с именем как у исходного.
2. Merge - Соединяет изображения, полученные в результате нарезки функцией Split в исходное изображение.
Принимает на вход 2 аргумента: путь к папке с нарезанными кусками и путь к файлу куда будет сохранено восстановленное изображение. 
3. Compare - Сравнивает 2 изображения по указанному пути. Изображения считаются идентичными если имеют одинаковый размер и все пиксели идентичны

Также в папке есть 3 утилиты для запуска вышеописанных функций из консоли.

---

## 2 Task
### Description
Реализовать функцию, которая на вход примет прямоугольники, маски, цвета,
текстовые метки с процентами и провизуализирует их следующим образом. Нужно
учесть, что размер шрифта зависит от размера объекта. Данные для визуализации
можно взять из COCO instance segmentation датасета.

### Solution
PD-2
Модуль annotate.py

Функция annotate - Визуализирует аннотации на изображении. Принимает на вход 4 обязательных аргумента: Изображение, информация об изображении, аннотации, категории в формате COCO. И 2 опциональных: show_bbox и show_mask типа bool определяющие отрисовывать или нет bounding box и маску соответсвенно.
Утилита main.py для запуска из консоли. 

---

## 3 Task
### Description
Написать приложение, которое на вход принимает директорию с видеофайлами
(продолжительность и разрешения одинаковые) и склеивает эти видео в одно в
виде прямоугольной/квадратной сетки. Размер сетки должен подбираться сам в
зависимости от количества видео. На каждом видео внизу нужно написать егоназвание. Если видео по количеству в идеальную сетку не складываются, то тогда
могут быть пустые черные квадраты в сетке. Все входные видео будут иметь
одинаковое разрешение и продолжительность.

### Solution
PD-3 Модуль megre_videos.py

Функция merge - Склеивает видео в сетку. Принимает на вход 2 аргумента: Путь к папке с видео и путь, куда сохранить получившуюся склейку. И один опциональный аргумент - желаемая пропорция видео, например "16:9". Функция стремится сделать получившееся видео заданной пропорции. Если продолжительность, fps или размеры кадра исходных видео различаются, то выберутся наименьшиее параметры. Видео с большим fps не замедлится, лишние кадры будут просто пропущены. Длинные и Большие видео будут обрезаны. Можно запустить из консоли.

## 4 Task
### Description
На вход папка с видео файлами -> на выходе нарезанные видео. Нарезка делается
либо по количеству кадров либо по продолжительности (сек).

### Solution
PD-4 Модуль slice.py

Функция slice - Нарезает видео на куски заданной длины. Принимает на вход путь к видео и продолжительность. Сохраняет в нарезанные куски в той же директории что и исходное видео. Можно запустить из консоли.

## 1 Extra Task
### Description
Сделать утилитку, которая на вход принимает ссылку на youtube видео, скачивает
его, вырезает из него непрерывный случайный кусок из 50 кадров, применяет к нимэту публичную модель [link](https://huggingface.co/facebook/detr-resnet-50) и сохраняет провизуализированные результаты в
результирующее видео.

### Solution
PD-extra-1
3 модуля:
1. download.py - Скачивает видео с YouTube
2. cut_video.py - Вырезает непрерывнй кусок и сохраняет
3. detect_on_video.py - Находит объекты используя [link](https://huggingface.co/facebook/detr-resnet-50). Отрисовывает Bounding Box'ы и сохраняет видео.
и шел скрипт, который делает все вышеописанное по очереди


